<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demande de design graphique</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans', sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .banner {
            padding: 12px 16px;
            text-align: center;
            transition: background-color 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #9e9e9e;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .banner h1 {
            font-size: 18px;
            font-weight: 600;
            flex: 1;
        }

        .banner-text-color-light {
            color: #ffffff;
        }

        .banner-text-color-dark {
            color: #1a1a1a;
        }

        .language-toggle {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .language-toggle button {
            padding: 6px 12px;
            border: none;
            background-color: rgba(255, 255, 255, 0.2);
            color: inherit;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .language-toggle button.active {
            background-color: rgba(255, 255, 255, 0.4);
        }

        .language-toggle button:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 1300px;
            margin: 12px auto;
            padding: 0 10px;
        }

        .form-section-pair {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .form-section-pair .form-section {
            margin-bottom: 0;
        }

        @media (max-width: 900px) {
            .form-section-pair {
                grid-template-columns: 1fr;
            }
        }

        .form-section {
            background: white;
            padding: 16px;
            margin-bottom: 16px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #003078;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e0e0e0;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 4px;
            color: #333;
            font-size: 13px;
        }

        label .required {
            color: #c62828;
        }

        input[type="text"],
        input[type="email"],
        input[type="date"],
        textarea {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: inherit;
            font-size: 13px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="date"]:focus,
        textarea:focus {
            outline: none;
            border-color: #003078;
            box-shadow: 0 0 0 3px rgba(0, 48, 120, 0.1);
        }

        input[type="text"].error,
        input[type="email"].error,
        textarea.error {
            border-color: #c62828;
        }

        textarea {
            resize: vertical;
            min-height: 70px;
        }

        .char-count {
            font-size: 11px;
            margin-top: 2px;
            color: #666;
        }

        .char-count.warning {
            color: #c62828;
        }

        .checkbox-group,
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        input[type="checkbox"],
        input[type="radio"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
            accent-color: #003078;
            flex-shrink: 0;
        }

        .checkbox-item label,
        .radio-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 400;
            font-size: 13px;
        }

        .nested-input {
            margin-left: 24px;
            margin-top: 6px;
        }

        .nested-input input {
            font-size: 13px;
        }

        .dynamic-section {
            margin-top: 8px;
            padding: 12px;
            background-color: #fafafa;
            border-left: 4px solid #003078;
            border-radius: 4px;
        }

        .dynamic-section label {
            font-size: 12px;
            margin-bottom: 6px;
        }

        .date-range-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
        }

        @media (max-width: 600px) {
            .date-range-row {
                grid-template-columns: 1fr;
            }
        }

        .two-column-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        @media (max-width: 768px) {
            .two-column-section {
                grid-template-columns: 1fr;
            }
        }

        .two-column-section .form-section {
            margin-bottom: 0;
        }

        .approver-item {
            padding: 12px;
            background-color: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            margin-bottom: 8px;
            position: relative;
        }

        .approver-item.requester {
            background-color: #e8f5e9;
            border-color: #2e7d32;
        }

        .approver-label {
            font-size: 11px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            margin-bottom: 6px;
        }

        .approver-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        @media (max-width: 600px) {
            .approver-fields {
                grid-template-columns: 1fr;
            }
        }

        .remove-approver {
            position: absolute;
            top: 12px;
            right: 12px;
            background: none;
            border: none;
            color: #999;
            font-size: 20px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .remove-approver:hover {
            color: #c62828;
        }

        .add-approver-btn {
            background-color: #f5f5f5;
            border: 2px dashed #003078;
            color: #003078;
            padding: 8px 12px;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .add-approver-btn:hover {
            background-color: #eff7ff;
        }

        .info-note {
            background-color: #e3f2fd;
            border-left: 4px solid #003078;
            padding: 8px 10px;
            border-radius: 4px;
            font-size: 11px;
            color: #1565c0;
            margin-top: 8px;
        }

        .title-only-confirm {
            background-color: #fff3e0;
            border: 1px solid #ffb74d;
            padding: 8px 10px;
            border-radius: 4px;
            margin-top: 6px;
            display: flex;
            gap: 8px;
            align-items: center;
            font-size: 12px;
        }

        .title-only-confirm button {
            background-color: #f9a825;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: background-color 0.2s;
            white-space: nowrap;
        }

        .title-only-confirm button:hover {
            background-color: #f57f17;
        }

        .error-message {
            color: #c62828;
            font-size: 13px;
            margin-top: 4px;
        }

        .submit-btn {
            background-color: #003078;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.2s;
        }

        .submit-btn:hover {
            background-color: #001f47;
        }

        .submit-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Banner color states */
        .banner.priority-low {
            background-color: #2e7d32;
        }

        .banner.priority-medium {
            background-color: #f9a825;
        }

        .banner.priority-high {
            background-color: #e65100;
        }

        .banner.priority-urgent {
            background-color: #c62828;
        }

        /* Language-specific content */
        .lang-fr {
            display: none;
        }

        .lang-en {
            display: block;
        }

        html[lang="fr"] .lang-fr {
            display: block;
        }

        html[lang="fr"] .lang-en {
            display: none;
        }

        html[lang="en"] .lang-fr {
            display: none !important;
        }

        /* Ensure language-specific labels in radio/checkbox items are hidden */
        html[lang="fr"] .radio-item .lang-en,
        html[lang="fr"] .checkbox-item .lang-en {
            display: none !important;
        }

        html[lang="en"] .radio-item .lang-fr,
        html[lang="en"] .checkbox-item .lang-fr {
            display: none !important;
        }

        .hidden {
            display: none;
        }

        .text-content-block {
            padding: 12px;
            background-color: #fafafa;
            border-radius: 4px;
            margin-bottom: 0;
        }

        .text-content-block:last-child {
            margin-bottom: 0;
        }

        .text-content-block > div:first-child {
            font-size: 12px !important;
            margin-bottom: 8px !important;
        }

        .form-section-pair .text-content-block {
            background-color: white;
            border: 1px solid #e0e0e0;
        }


        /* ===== Redesign inspired by provided reference ===== */
        :root {
            --page-bg: #eff1f6;
            --panel-bg: #ffffff;
            --panel-border: #d9deea;
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --blue: #2e5fb9;
            --blue-dark: #1e4ea8;
        }

        body {
            background: var(--page-bg);
            color: var(--text-main);
            font-size: 14px;
            line-height: 1.4;
            padding: 14px;
        }

        .banner {
            max-width: 980px;
            margin: 0 auto 14px;
            padding: 12px 14px;
            background: #2f9e44;
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.06);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .banner h1 {
            font-size: 17px;
            font-weight: 700;
            color: #ffffff;
        }

        .banner-text-color-light,
        .banner-text-color-dark {
            color: var(--text-main);
        }

        .language-toggle button {
            background: #ffffff;
            border: 1px solid #cbd5e1;
            color: #374151;
            border-radius: 6px;
            font-size: 12px;
            padding: 5px 10px;
        }

        .language-toggle button.active {
            background: var(--blue);
            border-color: var(--blue);
            color: #fff;
        }

        .language-toggle button:hover {
            background: #f8fafc;
        }

        .language-toggle button.active:hover {
            background: var(--blue-dark);
        }

        .container {
            max-width: 980px;
            margin: 0 auto;
            padding: 0;
        }

        .form-section,
        .text-content-block,
        .approver-item,
        .dynamic-section {
            border-radius: 10px;
            border: 1px solid var(--panel-border);
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
        }

        .form-section {
            padding: 14px;
            margin-bottom: 12px;
        }

        .form-section-pair {
            gap: 10px;
            margin-bottom: 12px;
        }

        .section-title {
            color: #24344d;
            font-size: 18px;
            font-weight: 700;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 12px;
            padding-bottom: 8px;
        }

        label {
            font-size: 12px;
            color: #334155;
            font-weight: 600;
        }

        input[type="text"],
        input[type="email"],
        input[type="date"],
        textarea {
            border: 1px solid #cbd5e1;
            background: #fff;
            border-radius: 7px;
            padding: 8px 10px;
            font-size: 13px;
        }

        textarea {
            min-height: 82px;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="date"]:focus,
        textarea:focus {
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(46, 95, 185, 0.15);
        }

        .checkbox-item label,
        .radio-item label {
            font-size: 12px;
            color: #374151;
        }

        /* Delivery Date Section */
        .delivery-date-group {
            background: #f6f8fd;
            border: 1px solid #d9e2f0;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .delivery-date-group .section-label {
            font-size: 11px;
            font-weight: 600;
            color: #4b5f86;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            display: block;
        }

        .delivery-date-group .form-group {
            margin-bottom: 0;
        }

        /* Material Distribution Dates Section */
        .material-dates-container {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e2e8f0;
        }

        .material-dates-container.empty {
            display: none;
        }

        .material-dates-header {
            font-size: 11px;
            font-weight: 600;
            color: #4b5f86;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            display: block;
        }

        .dynamic-section {
            background: #f8faff;
            border-left: 3px solid #aabce4;
            margin-bottom: 10px;
            padding: 10px 12px;
            border-radius: 6px;
        }

        .dynamic-section:last-child {
            margin-bottom: 0;
        }

        .material-date-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
            font-size: 12px;
            line-height: 1.3;
            color: #2b4c8f;
        }

        .material-date-field label {
            font-size: 12px;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .dynamic-section .date-range-row {
            gap: 8px;
            margin-bottom: 0;
        }

        .dynamic-section .material-date {
            padding: 6px 10px;
            font-size: 12px;
        }

        .add-approver-btn,
        .submit-btn,
        .title-only-confirm button {
            border-radius: 7px;
        }

        .submit-btn {
            background: var(--blue);
            font-size: 13px;
            padding: 10px 14px;
        }

        .submit-btn:hover {
            background: var(--blue-dark);
        }

        .add-approver-btn {
            background: #f8fafc;
            border: 1px dashed #9fb2d9;
            color: #2b4c8f;
        }

        .info-note {
            background: #f6f8fd;
            border-left: 3px solid #9fb2d9;
            color: #4b5f86;
            border-radius: 8px;
        }

        .title-only-confirm {
            background: #fff8e9;
            border: 1px solid #f7d89a;
        }

        .approver-item.requester {
            background: #f6f8fd;
            border-color: #c7d5f1;
        }

        .approver-label,
        .char-count {
            color: var(--text-muted);
        }

        .banner.priority-low {
            background: #2f9e44;
        }

        .banner.priority-medium {
            background: #f08c00;
        }

        .banner.priority-high {
            background: #d9480f;
        }

        .banner.priority-urgent {
            background: #7f1d1d;
        }

        /* Material Type Dropdown Styles */
        select#materials-dropdown {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #cbd5e1;
            background: #fff;
            border-radius: 7px;
            font-size: 13px;
            font-family: inherit;
            cursor: pointer;
        }

        select#materials-dropdown:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(46, 95, 185, 0.15);
        }

        /* Selected Materials Container */
        .selected-materials-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            min-height: 0;
        }

        .material-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 10px;
            background-color: #e8f1ff;
            border: 1px solid #aabce4;
            border-radius: 6px;
            font-size: 12px;
            color: #2b4c8f;
        }

        .material-badge .remove-material {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 16px;
            height: 16px;
            background-color: transparent;
            border: none;
            color: #2b4c8f;
            cursor: pointer;
            font-size: 18px;
            padding: 0;
            line-height: 1;
            transition: color 0.2s;
        }

        .material-badge .remove-material:hover {
            color: #c62828;
        }

        /* Priority Horizontal Layout */
        .radio-group {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            width: 100%;
        }

        @media (max-width: 768px) {
            .radio-group {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
        }

        @media (max-width: 500px) {
            .radio-group {
                grid-template-columns: 1fr;
            }
        }

        .radio-item {
            position: relative;
            display: flex;
            align-items: center;
            gap: 0;
            width: 100%;
        }

        .radio-item input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .radio-item label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 12px;
            border: 2px solid #cbd5e1;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            background-color: #fff;
            transition: all 0.3s ease;
            white-space: normal;
            width: 100%;
            text-align: center;
            min-height: 44px;
        }

        .radio-item input[type="radio"]:checked ~ label {
            border-color: var(--blue);
            background-color: var(--blue);
            color: white;
        }

        #priority-low:checked ~ label {
            background: linear-gradient(135deg, #2f9e44 0%, #1b6e1e 100%);
            border-color: #2f9e44;
            color: white;
        }

        #priority-medium:checked ~ label {
            background: linear-gradient(135deg, #f08c00 0%, #d97700 100%);
            border-color: #f08c00;
            color: white;
        }

        #priority-high:checked ~ label {
            background: linear-gradient(135deg, #d9480f 0%, #a63200 100%);
            border-color: #d9480f;
            color: white;
        }

        #priority-urgent:checked ~ label {
            background: linear-gradient(135deg, #7f1d1d 0%, #4c0a0a 100%);
            border-color: #7f1d1d;
            color: white;
        }

        .radio-item label:hover {
            border-color: var(--blue);
            background-color: #f8fafc;
        }

        .radio-item input[type="radio"]:checked ~ label:hover {
            opacity: 0.85;
        }

    </style>
</head>
<body>
    <div class="banner" id="banner">
        <h1 id="banner-title">
            <span class="lang-fr">Demande de design graphique</span>
            <span class="lang-en">Graphic Design Request</span>
        </h1>
        <div class="language-toggle">
            <button id="lang-fr-btn" class="active">FR</button>
            <button id="lang-en-btn">EN</button>
        </div>
    </div>

    <div class="container">
        <form id="designForm">
            <!-- Section 1: Request Title -->
            <div class="form-section">
                <div class="section-title" id="title-section">Titre de la demande</div>
                <div class="form-group">
                    <input type="text" id="request-title" name="request-title" placeholder="Name for communications" required>
                    <div class="error-message" id="request-title-error"></div>
                </div>
            </div>

            <!-- Section 2: Requester Info & Context (Side by side) -->
            <div class="form-section-pair">
                <div class="form-section">
                    <div class="section-title" id="requester-section">Demandeur</div>
                    <div class="form-group">
                        <input type="text" id="requester-name" name="requester-name" placeholder="Name *" required>
                        <div class="error-message" id="requester-name-error"></div>
                    </div>
                    <div class="form-group">
                        <input type="email" id="requester-email" name="requester-email" placeholder="Email *" required>
                        <div class="error-message" id="requester-email-error"></div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title" id="context-section">Contexte & objectif</div>
                    <div class="form-group">
                        <textarea id="context" name="context" placeholder="Context & objective"></textarea>
                    </div>
                </div>
            </div>

            <!-- Section 4: Material Type & Delivery (Side by side) -->
            <div class="form-section-pair">
                <div class="form-section">
                    <div class="section-title" id="material-section">Type de matériel <span class="required">*</span></div>
                    <div class="form-group">
                        <select id="materials-dropdown">
                            <option value="" data-fr="Sélectionner un type de matériel..." data-en="Select a material type...">Sélectionner un type de matériel...</option>
                            <option value="TV" data-fr="TV" data-en="TV">TV</option>
                            <option value="Carousel" data-fr="Carrousel" data-en="Carousel">Carrousel</option>
                            <option value="Screensaver" data-fr="Économiseur d'écran" data-en="Screensaver">Économiseur d'écran</option>
                            <option value="Email" data-fr="Courriel" data-en="Email">Courriel</option>
                            <option value="Flash Ads" data-fr="Publicités Flash" data-en="Flash Ads">Publicités Flash</option>
                            <option value="Intranet" data-fr="Éléments intranet" data-en="Intranet elements">Éléments intranet</option>
                            <option value="Photo" data-fr="Traitement photos" data-en="Photo editing">Traitement photos</option>
                            <option value="Modification" data-fr="Modification d'un élément existant" data-en="Modification of existing element">Modification d'un élément existant</option>
                            <option value="Other" data-fr="Autre" data-en="Other">Autre</option>
                        </select>
                    </div>
                    <div id="selected-materials" class="selected-materials-container"></div>
                    <div class="nested-input hidden" id="material-other-input">
                        <input type="text" id="material-other-text" placeholder="Spécifier le type">
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title" id="delivery-section">Dates</div>

                    <!-- Project Delivery Date -->
                    <div class="delivery-date-group">
                        <span class="section-label lang-fr">Date de livrable du projet</span>
                        <span class="section-label lang-en">Project delivery date</span>
                        <div class="form-group">
                            <label for="delivery-date">
                                <span class="lang-fr">Livrable <span class="required">*</span></span>
                                <span class="lang-en">Delivery <span class="required">*</span></span>
                            </label>
                            <input type="date" id="delivery-date" name="delivery-date" required>
                            <div class="error-message" id="delivery-date-error"></div>
                        </div>
                    </div>

                    <!-- Material Distribution Dates -->
                    <div class="material-dates-container">
                        <span class="material-dates-header lang-fr">Dates de diffusion par type de matériel</span>
                        <span class="material-dates-header lang-en">Distribution dates by material type</span>
                        <div id="dynamic-dates"></div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Priority -->
            <div class="form-section">
                <div class="section-title" id="priority-section">Niveau de priorité <span class="required">*</span></div>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="priority-low" name="priority" value="low">
                        <label for="priority-low">
                            <span class="lang-fr">Faible</span>
                            <span class="lang-en">Low</span>
                        </label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="priority-medium" name="priority" value="medium">
                        <label for="priority-medium">
                            <span class="lang-fr">Moyenne</span>
                            <span class="lang-en">Medium</span>
                        </label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="priority-high" name="priority" value="high">
                        <label for="priority-high">
                            <span class="lang-fr">Élevée</span>
                            <span class="lang-en">High</span>
                        </label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="priority-urgent" name="priority" value="urgent">
                        <label for="priority-urgent">
                            <span class="lang-fr">Très urgent</span>
                            <span class="lang-en">Very urgent</span>
                        </label>
                    </div>
                </div>
                <div class="error-message" id="priority-error"></div>
            </div>

            <!-- Section 6: Text Content (Side by side) -->
            <div class="form-section">
                <div class="section-title" id="content-section">Contenu textuel</div>

                <div class="form-section-pair">
                    <!-- French Content Block -->
                    <div class="text-content-block">
                        <div id="text-block-fr-title" style="font-weight: 600; margin-bottom: 8px; font-size: 12px; color: #003078;">Français / French</div>

                        <div class="form-group">
                            <input type="text" id="text-content-title-fr" name="text-content-title-fr" placeholder="Title *" required>
                            <div class="char-count" id="char-count-title-fr">0/100</div>
                            <div class="error-message" id="text-content-title-fr-error"></div>
                        </div>

                        <div class="form-group">
                            <textarea id="text-content-text-fr" name="text-content-text-fr" placeholder="Text"></textarea>
                            <div class="char-count" id="char-count-text-fr">0/150</div>
                            <div id="title-only-confirm-fr" class="hidden title-only-confirm">
                                <span class="lang-fr">Titre uniquement</span>
                                <span class="lang-en">Title only</span>
                                <button type="button" class="title-only-confirm-btn" data-lang="fr">
                                    <span class="lang-fr">OK</span>
                                    <span class="lang-en">OK</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- English Content Block -->
                    <div class="text-content-block">
                        <div id="text-block-en-title" style="font-weight: 600; margin-bottom: 8px; font-size: 12px; color: #003078;">English / Anglais</div>

                        <div class="form-group">
                            <input type="text" id="text-content-title-en" name="text-content-title-en" placeholder="Title *" required>
                            <div class="char-count" id="char-count-title-en">0/100</div>
                            <div class="error-message" id="text-content-title-en-error"></div>
                        </div>

                        <div class="form-group">
                            <textarea id="text-content-text-en" name="text-content-text-en" placeholder="Text"></textarea>
                            <div class="char-count" id="char-count-text-en">0/150</div>
                            <div id="title-only-confirm-en" class="hidden title-only-confirm">
                                <span class="lang-fr">Titre uniquement</span>
                                <span class="lang-en">Title only</span>
                                <button type="button" class="title-only-confirm-btn" data-lang="en">
                                    <span class="lang-fr">OK</span>
                                    <span class="lang-en">OK</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 7: Visual Guidelines & Options (Side by side) -->
            <div class="form-section-pair">
                <div class="form-section">
                    <div class="section-title" id="guidelines-section">Directives visuelles <span class="required">*</span></div>
                    <div class="form-group">
                        <textarea id="visual-guidelines" name="visual-guidelines" placeholder="Guidelines & references"></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title" id="options-section">Options <span class="required">*</span></div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="option-single" name="options" value="single">
                            <label for="option-single">
                                <span class="lang-fr">Un seul visuel</span>
                                <span class="lang-en">Single visual</span>
                            </label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="option-multiple" name="options" value="multiple">
                            <label for="option-multiple">
                                <span class="lang-fr">Plusieurs options</span>
                                <span class="lang-en">Multiple options</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 10: Approvers -->
            <div class="form-section">
                <div class="section-title" id="approvers-section">Approbateurs</div>

                <!-- Requester as first approver -->
                <div class="approver-item requester">
                    <div class="approver-label" id="approver-requester-label">Demandeur / Requester</div>
                    <div class="approver-fields">
                        <div>
                            <label style="font-size: 12px; margin-bottom: 4px;">
                                <span class="lang-fr">Nom</span>
                                <span class="lang-en">Name</span>
                            </label>
                            <input type="text" id="approver-requester-name" readonly style="background-color: #fff;">
                        </div>
                        <div>
                            <label style="font-size: 12px; margin-bottom: 4px;">
                                <span class="lang-fr">Courriel</span>
                                <span class="lang-en">Email</span>
                            </label>
                            <input type="email" id="approver-requester-email" readonly style="background-color: #fff;">
                        </div>
                    </div>
                </div>

                <!-- Additional approvers container -->
                <div id="additional-approvers"></div>

                <!-- Add approver button -->
                <button type="button" id="add-approver-btn" class="add-approver-btn">
                    <span class="lang-fr">+ Ajouter un approbateur</span>
                    <span class="lang-en">+ Add approver</span>
                </button>

                <!-- Info note -->
                <div class="info-note">
                    <span class="lang-fr">Les approbateurs supplémentaires recevront une copie de cette demande. Si aucun courriel n'est fourni, aucune copie ne sera envoyée.</span>
                    <span class="lang-en">Additional approvers will receive a copy of this request. If no email is provided, no copy will be sent.</span>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="form-section">
                <button type="submit" class="submit-btn" id="submit-btn">
                    <span class="lang-fr">Soumettre</span>
                    <span class="lang-en">Submit</span>
                </button>
            </div>
        </form>
    </div>

    <script>
        const form = document.getElementById('designForm');
        const banner = document.getElementById('banner');
        const langFrBtn = document.getElementById('lang-fr-btn');
        const langEnBtn = document.getElementById('lang-en-btn');
        let currentLanguage = 'fr';
        let titleOnlyConfirmed = { fr: false, en: false };

        const uiTranslations = {
            fr: {
                sectionTitles: {
                    'title-section': 'Titre de la demande',
                    'requester-section': 'Demandeur',
                    'context-section': 'Contexte & objectif',
                    'material-section': 'Type de matériel',
                    'delivery-section': 'Dates',
                    'priority-section': 'Niveau de priorité',
                    'content-section': 'Contenu textuel',
                    'guidelines-section': 'Directives visuelles',
                    'options-section': 'Options',
                    'approvers-section': 'Approbateurs'
                },
                approverRequesterLabel: 'Demandeur',
                textBlockFrTitle: 'Français / French',
                textBlockEnTitle: 'English / Anglais',
                placeholders: {
                    'request-title': 'Titre du projet pour communications',
                    'requester-name': 'Nom *',
                    'requester-email': 'Courriel *',
                    'context': 'Contexte & objectif',
                    'text-content-title-fr': 'Titre *',
                    'text-content-text-fr': 'Texte',
                    'text-content-title-en': 'Titre *',
                    'text-content-text-en': 'Text',
                    'visual-guidelines': 'Directives & références',
                    'material-other-text': 'Spécifier le type'
                }
            },
            en: {
                sectionTitles: {
                    'title-section': 'Request title',
                    'requester-section': 'Requester',
                    'context-section': 'Context & objective',
                    'material-section': 'Material type',
                    'delivery-section': 'Dates',
                    'priority-section': 'Priority level',
                    'content-section': 'Text content',
                    'guidelines-section': 'Visual guidelines',
                    'options-section': 'Options',
                    'approvers-section': 'Approvers'
                },
                approverRequesterLabel: 'Requester',
                textBlockFrTitle: 'French / Français',
                textBlockEnTitle: 'English / Anglais',
                placeholders: {
                    'request-title': 'Title of the project for communications',
                    'requester-name': 'Name *',
                    'requester-email': 'Email *',
                    'context': 'Context & objective',
                    'text-content-title-fr': 'Title *',
                    'text-content-text-fr': 'Text',
                    'text-content-title-en': 'Title *',
                    'text-content-text-en': 'Text',
                    'visual-guidelines': 'Guidelines & references',
                    'material-other-text': 'Specify the type'
                }
            }
        };

        // Language switching
        langFrBtn.addEventListener('click', () => switchLanguage('fr'));
        langEnBtn.addEventListener('click', () => switchLanguage('en'));

        function switchLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;
            langFrBtn.classList.toggle('active', lang === 'fr');
            langEnBtn.classList.toggle('active', lang === 'en');
            updateAllLabels();
        }

        function updateAllLabels() {
            const t = uiTranslations[currentLanguage];

            Object.entries(t.sectionTitles).forEach(([id, text]) => {
                const sectionTitle = document.getElementById(id);
                if (sectionTitle) {
                    sectionTitle.textContent = text;
                }
            });

            document.getElementById('approver-requester-label').textContent = t.approverRequesterLabel;
            document.getElementById('text-block-fr-title').textContent = t.textBlockFrTitle;
            document.getElementById('text-block-en-title').textContent = t.textBlockEnTitle;

            updatePlaceholders();
            updateDynamicMaterialLabels();
            updateMaterialDropdownLabels();
        }

        function updatePlaceholders() {
            const t = uiTranslations[currentLanguage];
            Object.entries(t.placeholders).forEach(([id, placeholder]) => {
                const element = document.getElementById(id);
                if (element && element.placeholder !== undefined) {
                    element.placeholder = placeholder;
                }
            });
        }

        // Priority banner color change
        const priorityInputs = document.querySelectorAll('input[name="priority"]');
        priorityInputs.forEach(input => {
            input.addEventListener('change', () => {
                banner.className = 'banner';
                const value = document.querySelector('input[name="priority"]:checked').value;
                if (value === 'low') {
                    banner.classList.add('priority-low');
                } else if (value === 'medium') {
                    banner.classList.add('priority-medium');
                } else if (value === 'high') {
                    banner.classList.add('priority-high');
                } else if (value === 'urgent') {
                    banner.classList.add('priority-urgent');
                }
                updateBannerTextColor();
                // Clear priority error when priority is selected
                document.getElementById('priority-error').textContent = '';
            });
        });

        function updateBannerTextColor() {
            const bannerTitle = document.getElementById('banner-title');
            const langToggle = document.querySelector('.language-toggle');
            const selectedPriority = document.querySelector('input[name="priority"]:checked')?.value;
            const useLightText = selectedPriority === 'high' || selectedPriority === 'urgent';

            bannerTitle.classList.toggle('banner-text-color-light', useLightText);
            bannerTitle.classList.toggle('banner-text-color-dark', !useLightText);
            langToggle.style.color = useLightText ? '#ffffff' : '#1f2937';
        }

        // Material type changes - dynamic date ranges and dropdown
        const materialsDropdown = document.getElementById('materials-dropdown');
        const selectedMaterialsContainer = document.getElementById('selected-materials');
        const dynamicDatesContainer = document.getElementById('dynamic-dates');
        let selectedMaterials = [];

        materialsDropdown.addEventListener('change', (e) => {
            if (e.target.value) {
                const value = e.target.value;
                if (!selectedMaterials.includes(value)) {
                    selectedMaterials.push(value);
                    renderSelectedMaterials();
                    updateDynamicDates();
                }
                e.target.value = '';
            }
        });

        function renderSelectedMaterials() {
            selectedMaterialsContainer.innerHTML = '';
            selectedMaterials.forEach(material => {
                const badge = document.createElement('div');
                badge.className = 'material-badge';
                const label = getMaterialLabel(material);
                badge.innerHTML = `
                    <span>${label}</span>
                    <button type="button" class="remove-material" data-material="${material}">×</button>
                `;
                badge.querySelector('.remove-material').addEventListener('click', (e) => {
                    e.preventDefault();
                    removeMaterial(material);
                });
                selectedMaterialsContainer.appendChild(badge);
            });
            // Clear materials error when materials are selected
            const materialsError = selectedMaterialsContainer.parentElement.querySelector('.error-message');
            if (materialsError && selectedMaterials.length > 0) {
                materialsError.textContent = '';
            }
        }

        function removeMaterial(material) {
            selectedMaterials = selectedMaterials.filter(m => m !== material);
            renderSelectedMaterials();
            updateDynamicDates();
            if (material === 'Other') {
                document.getElementById('material-other-input').classList.add('hidden');
                document.getElementById('material-other-text').value = '';
            }
        }

        // Handle "Other" material option - show input field when selected
        const originalRenderSelectedMaterials = renderSelectedMaterials;
        renderSelectedMaterials = function() {
            originalRenderSelectedMaterials();
            if (selectedMaterials.includes('Other')) {
                document.getElementById('material-other-input').classList.remove('hidden');
            } else {
                document.getElementById('material-other-input').classList.add('hidden');
            }
        };

        function updateDynamicDates() {
            dynamicDatesContainer.innerHTML = '';
            const materialsForDates = selectedMaterials.filter(val => val !== 'Other');
            const materialDatesContainer = dynamicDatesContainer.parentElement;

            if (materialsForDates.length === 0) {
                materialDatesContainer.classList.add('empty');
            } else {
                materialDatesContainer.classList.remove('empty');
            }

            materialsForDates.forEach(material => {
                const div = document.createElement('div');
                div.className = 'dynamic-section';
                div.innerHTML = `
                    <label class="material-date-title" data-material="${material}">${getMaterialLabel(material)}</label>
                    <div class="date-range-row">
                        <div class="material-date-field">
                            <label for="date-${material}-start">
                                <span class="lang-fr">Début</span>
                                <span class="lang-en">Start</span>
                            </label>
                            <input type="date" id="date-${material}-start" class="material-date" data-material="${material}" data-type="start" required>
                        </div>
                        <div class="material-date-field">
                            <label for="date-${material}-end">
                                <span class="lang-fr">Fin</span>
                                <span class="lang-en">End</span>
                            </label>
                            <input type="date" id="date-${material}-end" class="material-date" data-material="${material}" data-type="end" required>
                        </div>
                    </div>
                    <div class="error-message" id="error-${material}"></div>
                `;
                dynamicDatesContainer.appendChild(div);
            });

            // Add event listeners for date validation
            document.querySelectorAll('.material-date').forEach(input => {
                input.addEventListener('change', validateMaterialDateRange);
            });
        }

        function getMaterialLabel(material) {
            const materialLabels = {
                'TV': { fr: 'TV', en: 'TV' },
                'Carousel': { fr: 'Carrousel', en: 'Carousel' },
                'Screensaver': { fr: 'Économiseur d\'écran', en: 'Screensaver' },
                'Email': { fr: 'Courriel', en: 'Email' },
                'Flash Ads': { fr: 'Publicités Flash', en: 'Flash Ads' },
                'Intranet': { fr: 'Éléments intranet', en: 'Intranet elements' },
                'Photo': { fr: 'Traitement photos', en: 'Photo editing' },
                'Modification': { fr: 'Modification d\'un élément existant', en: 'Modification of existing element' }
            };

            return materialLabels[material]?.[currentLanguage] || material;
        }

        function updateDynamicMaterialLabels() {
            document.querySelectorAll('.material-date-title').forEach(label => {
                const material = label.dataset.material;
                label.textContent = getMaterialLabel(material);
            });
        }

        function updateMaterialDropdownLabels() {
            const dropdown = document.getElementById('materials-dropdown');
            dropdown.querySelectorAll('option').forEach(option => {
                const dataAttr = currentLanguage === 'fr' ? 'data-fr' : 'data-en';
                const translatedText = option.getAttribute(dataAttr);
                if (translatedText) {
                    option.textContent = translatedText;
                }
            });
        }

        function validateMaterialDateRange(e) {
            const material = e.target.dataset.material;
            const startInput = document.querySelector(`#date-${material}-start`);
            const endInput = document.querySelector(`#date-${material}-end`);
            const errorDiv = document.querySelector(`#error-${material}`);

            if (startInput.value && endInput.value) {
                const startDate = new Date(startInput.value);
                const endDate = new Date(endInput.value);
                if (startDate > endDate) {
                    errorDiv.textContent = currentLanguage === 'fr' ?
                        'La date de début doit être avant la date de fin' :
                        'Start date must be before end date';
                    endInput.classList.add('error');
                } else {
                    errorDiv.textContent = '';
                    endInput.classList.remove('error');
                }
            }
        }

        // Character counters
        const titleFrInput = document.getElementById('text-content-title-fr');
        const titleEnInput = document.getElementById('text-content-title-en');
        const textFrInput = document.getElementById('text-content-text-fr');
        const textEnInput = document.getElementById('text-content-text-en');

        titleFrInput.addEventListener('input', () => updateCharCounter('fr', 'title'));
        titleEnInput.addEventListener('input', () => updateCharCounter('en', 'title'));
        textFrInput.addEventListener('input', () => updateCharCounter('fr', 'text'));
        textEnInput.addEventListener('input', () => updateCharCounter('en', 'text'));

        function updateCharCounter(lang, type) {
            const input = type === 'title' ?
                (lang === 'fr' ? titleFrInput : titleEnInput) :
                (lang === 'fr' ? textFrInput : textEnInput);
            const countDiv = document.getElementById(`char-count-${type}-${lang}`);
            const maxChars = type === 'title' ? 100 : 150;
            const currentLength = input.value.length;

            if (currentLength > maxChars) {
                const overflow = currentLength - maxChars;
                countDiv.textContent = `${currentLength}/${maxChars} (+${overflow})`;
                countDiv.classList.add('warning');
                input.classList.add('error');
            } else {
                countDiv.textContent = `${currentLength}/${maxChars}`;
                countDiv.classList.remove('warning');
                input.classList.remove('error');
            }

            // Show/hide title-only confirm button
            if (type === 'text') {
                const confirmDiv = document.getElementById(`title-only-confirm-${lang}`);
                confirmDiv.classList.toggle('hidden', textFrInput.value.length > 0 || textEnInput.value.length > 0);
            }
        }

        // Title-only confirmation buttons
        document.querySelectorAll('.title-only-confirm-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const lang = btn.dataset.lang;
                titleOnlyConfirmed[lang] = true;
                btn.parentElement.classList.add('hidden');
            });
        });

        // Requester info auto-fill
        const requesterNameInput = document.getElementById('requester-name');
        const requesterEmailInput = document.getElementById('requester-email');
        const approverRequesterName = document.getElementById('approver-requester-name');
        const approverRequesterEmail = document.getElementById('approver-requester-email');

        requesterNameInput.addEventListener('change', () => {
            approverRequesterName.value = requesterNameInput.value;
        });

        requesterEmailInput.addEventListener('change', () => {
            approverRequesterEmail.value = requesterEmailInput.value;
        });

        // Add approver functionality
        let approverCount = 0;
        document.getElementById('add-approver-btn').addEventListener('click', (e) => {
            e.preventDefault();
            approverCount++;
            const container = document.getElementById('additional-approvers');
            const approverDiv = document.createElement('div');
            approverDiv.className = 'approver-item';
            approverDiv.id = `approver-${approverCount}`;
            approverDiv.innerHTML = `
                <button type="button" class="remove-approver" onclick="document.getElementById('approver-${approverCount}').remove()">×</button>
                <div class="approver-fields">
                    <div>
                        <label style="font-size: 12px; font-weight: 500; margin-bottom: 4px; display: block;">
                            <span class="lang-fr">Nom</span>
                            <span class="lang-en">Name</span>
                        </label>
                        <input type="text" class="approver-name" placeholder="">
                    </div>
                    <div>
                        <label style="font-size: 12px; font-weight: 500; margin-bottom: 4px; display: block;">
                            <span class="lang-fr">Courriel</span>
                            <span class="lang-en">Email</span>
                        </label>
                        <input type="email" class="approver-email" placeholder="">
                    </div>
                </div>
            `;
            container.appendChild(approverDiv);
        });

        // Clear options error when an option is selected
        const optionsInputs = document.querySelectorAll('input[name="options"]');
        optionsInputs.forEach(input => {
            input.addEventListener('change', () => {
                const optionsSection = document.getElementById('options-section').parentElement;
                const optionsError = optionsSection.querySelector('.error-message');
                if (optionsError) {
                    optionsError.textContent = '';
                }
            });
        });

        // Form submission
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            console.log('Form submission triggered');
            if (validateForm()) {
                console.log('Form validation passed, generating email...');
                generateAndSendEmail();
            } else {
                console.log('Form validation failed');
                // Scroll to first error
                const firstError = document.querySelector('.error');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        });

        function validateForm() {
            let isValid = true;
            const errors = {};

            // Clear all previous errors
            document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
            document.querySelectorAll('input, textarea').forEach(el => el.classList.remove('error'));

            // Required fields
            const requiredFields = [
                'request-title',
                'requester-name',
                'requester-email',
                'delivery-date',
                'text-content-title-fr',
                'text-content-title-en'
            ];

            requiredFields.forEach(field => {
                const input = document.getElementById(field);
                if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('error');
                    const errorDiv = document.getElementById(`${field}-error`);
                    if (errorDiv) {
                        errorDiv.textContent = currentLanguage === 'fr' ? 'Ce champ est obligatoire' : 'This field is required';
                    }
                }
            });

            // Email validation
            const emailInput = document.getElementById('requester-email');
            if (emailInput.value && !isValidEmail(emailInput.value)) {
                isValid = false;
                emailInput.classList.add('error');
                document.getElementById('requester-email-error').textContent =
                    currentLanguage === 'fr' ? 'Format de courriel invalide' : 'Invalid email format';
            }

            // Priority validation
            if (!document.querySelector('input[name="priority"]:checked')) {
                isValid = false;
                document.getElementById('priority-error').textContent =
                    currentLanguage === 'fr' ? 'Veuillez sélectionner un niveau de priorité' : 'Please select a priority level';
            }

            // Material type validation - at least one must be selected
            if (selectedMaterials.length === 0) {
                isValid = false;
                const materialsSection = document.getElementById('selected-materials');
                const errorMsg = document.createElement('div');
                errorMsg.className = 'error-message';
                errorMsg.textContent = currentLanguage === 'fr' ? 'Veuillez sélectionner au moins un type de matériel' : 'Please select at least one material type';
                materialsSection.parentElement.appendChild(errorMsg);
            }

            // Options validation - one must be selected
            if (!document.querySelector('input[name="options"]:checked')) {
                isValid = false;
                const optionsSection = document.getElementById('options-section').parentElement;
                let optionsError = optionsSection.querySelector('.error-message');
                if (!optionsError) {
                    optionsError = document.createElement('div');
                    optionsError.className = 'error-message';
                    optionsSection.appendChild(optionsError);
                }
                optionsError.textContent = currentLanguage === 'fr' ? 'Veuillez sélectionner une option' : 'Please select an option';
            }

            // Visual Guidelines validation
            const visualGuidelinesInput = document.getElementById('visual-guidelines');
            if (!visualGuidelinesInput.value.trim()) {
                isValid = false;
                visualGuidelinesInput.classList.add('error');
                const guidelinesSection = document.getElementById('guidelines-section').parentElement;
                let guidelinesError = guidelinesSection.querySelector('.error-message');
                if (!guidelinesError) {
                    guidelinesError = document.createElement('div');
                    guidelinesError.className = 'error-message';
                    guidelinesSection.appendChild(guidelinesError);
                }
                guidelinesError.textContent = currentLanguage === 'fr' ? 'Ce champ est obligatoire' : 'This field is required';
            }

            // Character limit validation
            if (document.getElementById('text-content-title-fr').value.length > 100 ||
                document.getElementById('text-content-title-en').value.length > 100 ||
                document.getElementById('text-content-text-fr').value.length > 150 ||
                document.getElementById('text-content-text-en').value.length > 150) {
                isValid = false;
                const msg = currentLanguage === 'fr' ? 'Dépassement de la limite de caractères' : 'Character limit exceeded';
                if (document.getElementById('text-content-title-fr').value.length > 100) {
                    document.getElementById('text-content-title-fr-error').textContent = msg;
                }
                if (document.getElementById('text-content-title-en').value.length > 100) {
                    document.getElementById('text-content-title-en-error').textContent = msg;
                }
            }

            // Material date validation
            document.querySelectorAll('.material-date').forEach(input => {
                if (!input.value) {
                    isValid = false;
                    input.classList.add('error');
                    const material = input.dataset.material;
                    const errorDiv = document.querySelector(`#error-${material}`);
                    if (errorDiv && !errorDiv.textContent) {
                        errorDiv.textContent = currentLanguage === 'fr'
                            ? 'Les dates de distribution sont obligatoires'
                            : 'Distribution dates are required';
                    }
                }
            });

            // Validate text content - if text is empty, must have confirmation
            // French text content validation
            if (!textFrInput.value.trim() && !titleOnlyConfirmed.fr) {
                isValid = false;
                console.warn('French text content is empty and not confirmed');
            }
            // English text content validation
            if (!textEnInput.value.trim() && !titleOnlyConfirmed.en) {
                isValid = false;
                console.warn('English text content is empty and not confirmed');
            }

            return isValid;
        }

        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function generateAndSendEmail() {
            const title = document.getElementById('request-title').value;

            // Keep mailto intentionally simple so the mail client opens reliably
            const mailtoSubject = currentLanguage === 'fr'
                ? `Demande de design — ${title}`
                : `Design Request — ${title}`;
            const mailtoLink = `mailto:alexandre.rochon@cfp-psc.gc.ca?subject=${encodeURIComponent(mailtoSubject)}`;

            // Open email client from direct user action
            window.location.assign(mailtoLink);

            const msg = currentLanguage === 'fr'
                ? 'Le client courriel devrait s\'ouvrir maintenant avec un nouveau message.'
                : 'Your email client should open now with a new message.';
            alert(msg);

            // Reset form
            form.reset();
            selectedMaterials = [];
            renderSelectedMaterials();
            updateDynamicDates();
            titleOnlyConfirmed = { fr: false, en: false };
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString + 'T00:00:00');
            return currentLanguage === 'fr' ?
                date.toLocaleDateString('fr-CA', { year: 'numeric', month: 'long', day: 'numeric' }) :
                date.toLocaleDateString('en-CA', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        function getPriorityLabel(value, lang) {
            const labels = {
                'low': { fr: 'Faible', en: 'Low' },
                'medium': { fr: 'Moyenne', en: 'Medium' },
                'high': { fr: 'Élevée', en: 'High' },
                'urgent': { fr: 'Très urgent', en: 'Very urgent' }
            };
            return labels[value][lang];
        }

        // Scroll effect for banner color change
        window.addEventListener('scroll', () => {
            const scrolled = window.scrollY;
            const banner = document.getElementById('banner');

            // Change banner background based on scroll position
            if (scrolled > 0) {
                // Lighten the banner slightly when scrolling
                banner.style.opacity = '0.95';
            } else {
                banner.style.opacity = '1';
            }
        });

        // Initialize
        updateBannerTextColor();
    </script>
</body>
</html>
