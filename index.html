<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demande de design graphique</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans', sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .banner {
            padding: 12px 16px;
            text-align: center;
            transition: background-color 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #9e9e9e;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .banner h1 {
            font-size: 18px;
            font-weight: 600;
            flex: 1;
        }

        .banner-text-color-light {
            color: #ffffff;
        }

        .banner-text-color-dark {
            color: #1a1a1a;
        }

        .language-toggle {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .language-toggle button {
            padding: 6px 12px;
            border: none;
            background-color: rgba(255, 255, 255, 0.2);
            color: inherit;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .language-toggle button.active {
            background-color: rgba(255, 255, 255, 0.4);
        }

        .language-toggle button:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 1300px;
            margin: 12px auto;
            padding: 0 10px;
        }

        .form-section-pair {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .form-section-pair .form-section {
            margin-bottom: 0;
        }

        @media (max-width: 900px) {
            .form-section-pair {
                grid-template-columns: 1fr;
            }
        }

        .form-section {
            background: white;
            padding: 16px;
            margin-bottom: 16px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #003078;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e0e0e0;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 4px;
            color: #333;
            font-size: 13px;
        }

        label .required {
            color: #c62828;
        }

        input[type="text"],
        input[type="email"],
        input[type="date"],
        textarea {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: inherit;
            font-size: 13px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="date"]:focus,
        textarea:focus {
            outline: none;
            border-color: #003078;
            box-shadow: 0 0 0 3px rgba(0, 48, 120, 0.1);
        }

        input[type="text"].error,
        input[type="email"].error,
        textarea.error {
            border-color: #c62828;
        }

        textarea {
            resize: vertical;
            min-height: 70px;
        }

        .char-count {
            font-size: 11px;
            margin-top: 2px;
            color: #666;
        }

        .char-count.warning {
            color: #c62828;
        }

        .checkbox-group,
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        input[type="checkbox"],
        input[type="radio"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
            accent-color: #003078;
            flex-shrink: 0;
        }

        .checkbox-item label,
        .radio-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 400;
            font-size: 13px;
        }

        .nested-input {
            margin-left: 24px;
            margin-top: 6px;
        }

        .nested-input input {
            font-size: 13px;
        }

        .dynamic-section {
            margin-top: 8px;
            padding: 12px;
            background-color: #fafafa;
            border-left: 4px solid #003078;
            border-radius: 4px;
        }

        .dynamic-section label {
            font-size: 12px;
            margin-bottom: 6px;
        }

        .date-range-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
        }

        @media (max-width: 600px) {
            .date-range-row {
                grid-template-columns: 1fr;
            }
        }

        .two-column-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        @media (max-width: 768px) {
            .two-column-section {
                grid-template-columns: 1fr;
            }
        }

        .two-column-section .form-section {
            margin-bottom: 0;
        }

        .approver-item {
            padding: 12px;
            background-color: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            margin-bottom: 8px;
            position: relative;
        }

        .approver-item.requester {
            background-color: #e8f5e9;
            border-color: #2e7d32;
        }

        .approver-label {
            font-size: 11px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            margin-bottom: 6px;
        }

        .approver-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        @media (max-width: 600px) {
            .approver-fields {
                grid-template-columns: 1fr;
            }
        }

        .remove-approver {
            position: absolute;
            top: 12px;
            right: 12px;
            background: none;
            border: none;
            color: #999;
            font-size: 20px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .remove-approver:hover {
            color: #c62828;
        }

        .add-approver-btn {
            background-color: #f5f5f5;
            border: 2px dashed #003078;
            color: #003078;
            padding: 8px 12px;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .add-approver-btn:hover {
            background-color: #eff7ff;
        }

        .info-note {
            background-color: #e3f2fd;
            border-left: 4px solid #003078;
            padding: 8px 10px;
            border-radius: 4px;
            font-size: 11px;
            color: #1565c0;
            margin-top: 8px;
        }

        .title-only-confirm {
            background-color: #fff3e0;
            border: 1px solid #ffb74d;
            padding: 8px 10px;
            border-radius: 4px;
            margin-top: 6px;
            display: flex;
            gap: 8px;
            align-items: center;
            font-size: 12px;
        }

        .title-only-confirm button {
            background-color: #f9a825;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: background-color 0.2s;
            white-space: nowrap;
        }

        .title-only-confirm button:hover {
            background-color: #f57f17;
        }

        .error-message {
            color: #c62828;
            font-size: 13px;
            margin-top: 4px;
        }

        .submit-btn {
            background-color: #003078;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.2s;
        }

        .submit-btn:hover {
            background-color: #001f47;
        }

        .submit-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Banner color states */
        .banner.priority-low {
            background-color: #2e7d32;
        }

        .banner.priority-medium {
            background-color: #f9a825;
        }

        .banner.priority-high {
            background-color: #e65100;
        }

        .banner.priority-urgent {
            background-color: #c62828;
        }

        /* Language-specific content */
        .lang-fr {
            display: none;
        }

        .lang-en {
            display: block;
        }

        html[lang="fr"] .lang-fr {
            display: block;
        }

        html[lang="fr"] .lang-en {
            display: none;
        }

        .hidden {
            display: none;
        }

        .text-content-block {
            padding: 12px;
            background-color: #fafafa;
            border-radius: 4px;
            margin-bottom: 0;
        }

        .text-content-block:last-child {
            margin-bottom: 0;
        }

        .text-content-block > div:first-child {
            font-size: 12px !important;
            margin-bottom: 8px !important;
        }

        .form-section-pair .text-content-block {
            background-color: white;
            border: 1px solid #e0e0e0;
        }


        /* ===== Redesign inspired by provided reference ===== */
        :root {
            --page-bg: #eff1f6;
            --panel-bg: #ffffff;
            --panel-border: #d9deea;
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --blue: #2e5fb9;
            --blue-dark: #1e4ea8;
        }

        body {
            background: var(--page-bg);
            color: var(--text-main);
            font-size: 14px;
            line-height: 1.4;
            padding: 14px;
        }

        .banner {
            max-width: 980px;
            margin: 0 auto 14px;
            padding: 12px 14px;
            background: #2f9e44;
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.06);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .banner h1 {
            font-size: 17px;
            font-weight: 700;
            color: #ffffff;
        }

        .banner-text-color-light,
        .banner-text-color-dark {
            color: #ffffff;
        }

        #material-section + .checkbox-group {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 8px 16px;
        }

        #material-section + .checkbox-group .nested-input {
            grid-column: 1 / -1;
        }

        #priority-section + .radio-group {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 10px;
        }

        #priority-section + .radio-group .radio-item {
            justify-content: center;
        }

        @media (max-width: 768px) {
            #priority-section + .radio-group {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        .language-toggle button {
            background: #ffffff;
            border: 1px solid #cbd5e1;
            color: #374151;
            border-radius: 6px;
            font-size: 12px;
            padding: 5px 10px;
        }

        .language-toggle button.active {
            background: var(--blue);
            border-color: var(--blue);
            color: #fff;
        }

        .language-toggle button:hover {
            background: #f8fafc;
        }

        .language-toggle button.active:hover {
            background: var(--blue-dark);
        }

        .container {
            max-width: 980px;
            margin: 0 auto;
            padding: 0;
        }

        .form-section,
        .text-content-block,
        .approver-item,
        .dynamic-section {
            border-radius: 10px;
            border: 1px solid var(--panel-border);
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
        }

        .form-section {
            padding: 14px;
            margin-bottom: 12px;
        }

        .form-section-pair {
            gap: 10px;
            margin-bottom: 12px;
        }

        .section-title {
            color: #24344d;
            font-size: 18px;
            font-weight: 700;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 12px;
            padding-bottom: 8px;
        }

        label {
            font-size: 12px;
            color: #334155;
            font-weight: 600;
        }

        input[type="text"],
        input[type="email"],
        input[type="date"],
        textarea {
            border: 1px solid #cbd5e1;
            background: #fff;
            border-radius: 7px;
            padding: 8px 10px;
            font-size: 13px;
        }

        textarea {
            min-height: 82px;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="date"]:focus,
        textarea:focus {
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(46, 95, 185, 0.15);
        }

        .checkbox-item label,
        .radio-item label {
            font-size: 12px;
            color: #374151;
        }

        .dynamic-section {
            background: #f8faff;
            border-left: 3px solid #aabce4;
            margin-top: 6px;
            padding: 8px 10px;
        }

        .material-date-title {
            font-weight: 600;
            margin-bottom: 6px;
            display: block;
            font-size: 11px;
            line-height: 1.25;
        }

        .material-date-field label {
            font-size: 11px;
            margin-bottom: 3px;
        }

        .dynamic-section .date-range-row {
            gap: 6px;
            margin-bottom: 4px;
        }

        .dynamic-section .material-date {
            padding: 5px 8px;
            font-size: 12px;
        }

        .add-approver-btn,
        .submit-btn,
        .title-only-confirm button {
            border-radius: 7px;
        }

        .submit-btn {
            background: var(--blue);
            font-size: 13px;
            padding: 10px 14px;
        }

        .submit-btn:hover {
            background: var(--blue-dark);
        }

        .add-approver-btn {
            background: #f8fafc;
            border: 1px dashed #9fb2d9;
            color: #2b4c8f;
        }

        .info-note {
            background: #f6f8fd;
            border-left: 3px solid #9fb2d9;
            color: #4b5f86;
            border-radius: 8px;
        }

        .title-only-confirm {
            background: #fff8e9;
            border: 1px solid #f7d89a;
        }

        .approver-item.requester {
            background: #f6f8fd;
            border-color: #c7d5f1;
        }

        .approver-label,
        .char-count {
            color: var(--text-muted);
        }

        .banner.priority-low {
            background: #2f9e44;
        }

        .banner.priority-medium {
            background: #f08c00;
        }

        .banner.priority-high {
            background: #d9480f;
        }

        .banner.priority-urgent {
            background: #7f1d1d;
        }

    </style>
</head>
<body>
    <div class="banner" id="banner">
        <h1 id="banner-title">
            <span class="lang-fr">Demande de design graphique</span>
            <span class="lang-en">Graphic Design Request</span>
        </h1>
        <div class="language-toggle">
            <button id="lang-fr-btn" class="active">FR</button>
            <button id="lang-en-btn">EN</button>
        </div>
    </div>

    <div class="container">
        <form id="designForm">
            <!-- Section 1: Request Title -->
            <div class="form-section">
                <div class="section-title" id="title-section">Titre de la demande</div>
                <div class="form-group">
                    <label for="request-title">
                        <span class="lang-fr">Titre <span class="required">*</span></span>
                        <span class="lang-en">Title <span class="required">*</span></span>
                    </label>
                    <input type="text" id="request-title" name="request-title" required>
                    <div class="error-message" id="request-title-error"></div>
                </div>
            </div>

            <!-- Section 2: Requester Info & Context (Side by side) -->
            <div class="form-section-pair">
                <div class="form-section">
                    <div class="section-title" id="requester-section">Demandeur</div>
                    <div class="form-group">
                        <label for="requester-name">
                            <span class="lang-fr">Nom <span class="required">*</span></span>
                            <span class="lang-en">Name <span class="required">*</span></span>
                        </label>
                        <input type="text" id="requester-name" name="requester-name" required>
                        <div class="error-message" id="requester-name-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="requester-email">
                            <span class="lang-fr">Courriel <span class="required">*</span></span>
                            <span class="lang-en">Email <span class="required">*</span></span>
                        </label>
                        <input type="email" id="requester-email" name="requester-email" required>
                        <div class="error-message" id="requester-email-error"></div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title" id="context-section">Contexte & objectif</div>
                    <div class="form-group">
                        <label for="context">
                            <span class="lang-fr">Contexte & objectif</span>
                            <span class="lang-en">Context & Objective</span>
                        </label>
                        <textarea id="context" name="context" placeholder=""></textarea>
                    </div>
                </div>
            </div>

            <!-- Section 4: Material Type & Delivery (Side by side) -->
            <div class="form-section-pair">
                <div class="form-section">
                    <div class="section-title" id="material-section">Type de matériel</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-tv" name="materials" value="TV">
                            <label for="material-tv">TV</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-carousel" name="materials" value="Carousel">
                            <label for="material-carousel" class="lang-fr">Carrousel</label>
                            <label for="material-carousel" class="lang-en">Carousel</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-screensaver" name="materials" value="Screensaver">
                            <label for="material-screensaver">Screensaver</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-email" name="materials" value="Email">
                            <label for="material-email" class="lang-fr">Courriel</label>
                            <label for="material-email" class="lang-en">Email</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-flash" name="materials" value="Flash Ads">
                            <label for="material-flash">Flash Ads</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-intranet" name="materials" value="Intranet">
                            <label for="material-intranet" class="lang-fr">Éléments intranet</label>
                            <label for="material-intranet" class="lang-en">Intranet elements</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-photo" name="materials" value="Photo">
                            <label for="material-photo" class="lang-fr">Traitement photos</label>
                            <label for="material-photo" class="lang-en">Photo editing</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-modification" name="materials" value="Modification">
                            <label for="material-modification" class="lang-fr">Modification d'un élément existant</label>
                            <label for="material-modification" class="lang-en">Modification of existing element</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="material-other" name="materials" value="Other">
                            <label for="material-other" class="lang-fr">Autre</label>
                            <label for="material-other" class="lang-en">Other</label>
                        </div>
                        <div class="nested-input hidden" id="material-other-input">
                            <input type="text" id="material-other-text" placeholder="">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title" id="delivery-section">Dates</div>
                    <div class="form-group">
                        <label for="delivery-date">
                            <span class="lang-fr">Livrable <span class="required">*</span></span>
                            <span class="lang-en">Delivery <span class="required">*</span></span>
                        </label>
                        <input type="date" id="delivery-date" name="delivery-date" required>
                        <div class="error-message" id="delivery-date-error"></div>
                    </div>

                    <!-- Dynamic date ranges for each material -->
                    <div id="dynamic-dates"></div>
                </div>
            </div>

            <!-- Section 5: Priority -->
            <div class="form-section">
                <div class="section-title" id="priority-section">Niveau de priorité</div>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="priority-low" name="priority" value="low">
                        <label for="priority-low" class="lang-fr">Faible</label>
                        <label for="priority-low" class="lang-en">Low</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="priority-medium" name="priority" value="medium">
                        <label for="priority-medium" class="lang-fr">Moyenne</label>
                        <label for="priority-medium" class="lang-en">Medium</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="priority-high" name="priority" value="high">
                        <label for="priority-high" class="lang-fr">Élevée</label>
                        <label for="priority-high" class="lang-en">High</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="priority-urgent" name="priority" value="urgent">
                        <label for="priority-urgent" class="lang-fr">Très urgent</label>
                        <label for="priority-urgent" class="lang-en">Very urgent</label>
                    </div>
                </div>
                <div class="error-message" id="priority-error"></div>
            </div>

            <!-- Section 6: Text Content (Side by side) -->
            <div class="form-section">
                <div class="section-title" id="content-section">Contenu textuel</div>

                <div class="form-section-pair">
                    <!-- French Content Block -->
                    <div class="text-content-block">
                        <div id="text-block-fr-title" style="font-weight: 600; margin-bottom: 8px; font-size: 12px; color: #003078;">Français / French</div>

                        <div class="form-group">
                            <label for="text-content-title-fr">
                                <span class="lang-fr">Titre <span class="required">*</span></span>
                                <span class="lang-en">Title <span class="required">*</span></span>
                            </label>
                            <div style="font-size: 11px; color: #666; margin-bottom: 2px;">
                                <span class="lang-fr">Max 100</span>
                                <span class="lang-en">Max 100</span>
                            </div>
                            <input type="text" id="text-content-title-fr" name="text-content-title-fr" maxlength="100" required>
                            <div class="char-count" id="char-count-title-fr">0/100</div>
                            <div class="error-message" id="text-content-title-fr-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="text-content-text-fr">
                                <span class="lang-fr">Texte</span>
                                <span class="lang-en">Text</span>
                            </label>
                            <div style="font-size: 11px; color: #666; margin-bottom: 2px;">
                                <span class="lang-fr">Max 150</span>
                                <span class="lang-en">Max 150</span>
                            </div>
                            <textarea id="text-content-text-fr" name="text-content-text-fr" maxlength="150"></textarea>
                            <div class="char-count" id="char-count-text-fr">0/150</div>
                            <div id="title-only-confirm-fr" class="hidden title-only-confirm">
                                <span class="lang-fr">Titre uniquement</span>
                                <span class="lang-en">Title only</span>
                                <button type="button" class="title-only-confirm-btn" data-lang="fr">
                                    <span class="lang-fr">OK</span>
                                    <span class="lang-en">OK</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- English Content Block -->
                    <div class="text-content-block">
                        <div id="text-block-en-title" style="font-weight: 600; margin-bottom: 8px; font-size: 12px; color: #003078;">English / Anglais</div>

                        <div class="form-group">
                            <label for="text-content-title-en">
                                <span class="lang-fr">Titre <span class="required">*</span></span>
                                <span class="lang-en">Title <span class="required">*</span></span>
                            </label>
                            <div style="font-size: 11px; color: #666; margin-bottom: 2px;">
                                <span class="lang-fr">Max 100</span>
                                <span class="lang-en">Max 100</span>
                            </div>
                            <input type="text" id="text-content-title-en" name="text-content-title-en" maxlength="100" required>
                            <div class="char-count" id="char-count-title-en">0/100</div>
                            <div class="error-message" id="text-content-title-en-error"></div>
                        </div>

                        <div class="form-group">
                            <label for="text-content-text-en">
                                <span class="lang-fr">Texte</span>
                                <span class="lang-en">Text</span>
                            </label>
                            <div style="font-size: 11px; color: #666; margin-bottom: 2px;">
                                <span class="lang-fr">Max 150</span>
                                <span class="lang-en">Max 150</span>
                            </div>
                            <textarea id="text-content-text-en" name="text-content-text-en" maxlength="150"></textarea>
                            <div class="char-count" id="char-count-text-en">0/150</div>
                            <div id="title-only-confirm-en" class="hidden title-only-confirm">
                                <span class="lang-fr">Titre uniquement</span>
                                <span class="lang-en">Title only</span>
                                <button type="button" class="title-only-confirm-btn" data-lang="en">
                                    <span class="lang-fr">OK</span>
                                    <span class="lang-en">OK</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 7: Visual Guidelines & Options (Side by side) -->
            <div class="form-section-pair">
                <div class="form-section">
                    <div class="section-title" id="guidelines-section">Directives visuelles</div>
                    <div class="form-group">
                        <label for="visual-guidelines">
                            <span class="lang-fr">Directives & références</span>
                            <span class="lang-en">Guidelines & References</span>
                        </label>
                        <textarea id="visual-guidelines" name="visual-guidelines" placeholder=""></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title" id="options-section">Options</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="option-single" name="options" value="single">
                            <label for="option-single" class="lang-fr">Un seul visuel</label>
                            <label for="option-single" class="lang-en">Single visual</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="option-multiple" name="options" value="multiple">
                            <label for="option-multiple" class="lang-fr">Plusieurs options</label>
                            <label for="option-multiple" class="lang-en">Multiple options</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 10: Approvers -->
            <div class="form-section">
                <div class="section-title" id="approvers-section">Approbateurs</div>

                <!-- Requester as first approver -->
                <div class="approver-item requester">
                    <div class="approver-label" id="approver-requester-label">Demandeur / Requester</div>
                    <div class="approver-fields">
                        <div>
                            <label style="font-size: 12px; margin-bottom: 4px;">
                                <span class="lang-fr">Nom</span>
                                <span class="lang-en">Name</span>
                            </label>
                            <input type="text" id="approver-requester-name" readonly style="background-color: #fff;">
                        </div>
                        <div>
                            <label style="font-size: 12px; margin-bottom: 4px;">
                                <span class="lang-fr">Courriel</span>
                                <span class="lang-en">Email</span>
                            </label>
                            <input type="email" id="approver-requester-email" readonly style="background-color: #fff;">
                        </div>
                    </div>
                </div>

                <!-- Additional approvers container -->
                <div id="additional-approvers"></div>

                <!-- Add approver button -->
                <button type="button" id="add-approver-btn" class="add-approver-btn">
                    <span class="lang-fr">+ Ajouter un approbateur</span>
                    <span class="lang-en">+ Add approver</span>
                </button>

                <!-- Info note -->
                <div class="info-note">
                    <span class="lang-fr">Les approbateurs supplémentaires recevront une copie de cette demande. Si aucun courriel n'est fourni, aucune copie ne sera envoyée.</span>
                    <span class="lang-en">Additional approvers will receive a copy of this request. If no email is provided, no copy will be sent.</span>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="form-section">
                <button type="submit" class="submit-btn" id="submit-btn">
                    <span class="lang-fr">Soumettre</span>
                    <span class="lang-en">Submit</span>
                </button>
            </div>
        </form>
    </div>

    <script>
        const form = document.getElementById('designForm');
        const banner = document.getElementById('banner');
        const langFrBtn = document.getElementById('lang-fr-btn');
        const langEnBtn = document.getElementById('lang-en-btn');
        let currentLanguage = 'fr';
        let titleOnlyConfirmed = { fr: false, en: false };

        const uiTranslations = {
            fr: {
                sectionTitles: {
                    'title-section': 'Titre de la demande',
                    'requester-section': 'Demandeur',
                    'context-section': 'Contexte & objectif',
                    'material-section': 'Type de matériel',
                    'delivery-section': 'Dates',
                    'priority-section': 'Niveau de priorité',
                    'content-section': 'Contenu textuel',
                    'guidelines-section': 'Directives visuelles',
                    'options-section': 'Options',
                    'approvers-section': 'Approbateurs'
                },
                approverRequesterLabel: 'Demandeur',
                textBlockFrTitle: 'Français / French',
                textBlockEnTitle: 'English / Anglais'
            },
            en: {
                sectionTitles: {
                    'title-section': 'Request title',
                    'requester-section': 'Requester',
                    'context-section': 'Context & objective',
                    'material-section': 'Material type',
                    'delivery-section': 'Dates',
                    'priority-section': 'Priority level',
                    'content-section': 'Text content',
                    'guidelines-section': 'Visual guidelines',
                    'options-section': 'Options',
                    'approvers-section': 'Approvers'
                },
                approverRequesterLabel: 'Requester',
                textBlockFrTitle: 'French / Français',
                textBlockEnTitle: 'English / Anglais'
            }
        };

        // Language switching
        langFrBtn.addEventListener('click', () => switchLanguage('fr'));
        langEnBtn.addEventListener('click', () => switchLanguage('en'));

        function switchLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;
            langFrBtn.classList.toggle('active', lang === 'fr');
            langEnBtn.classList.toggle('active', lang === 'en');
            updateAllLabels();
        }

        function updateAllLabels() {
            const t = uiTranslations[currentLanguage];

            Object.entries(t.sectionTitles).forEach(([id, text]) => {
                const sectionTitle = document.getElementById(id);
                if (sectionTitle) {
                    sectionTitle.textContent = text;
                }
            });

            document.getElementById('approver-requester-label').textContent = t.approverRequesterLabel;
            document.getElementById('text-block-fr-title').textContent = t.textBlockFrTitle;
            document.getElementById('text-block-en-title').textContent = t.textBlockEnTitle;

            updateDynamicMaterialLabels();
        }

        // Priority banner color change
        const priorityInputs = document.querySelectorAll('input[name="priority"]');
        priorityInputs.forEach(input => {
            input.addEventListener('change', () => {
                banner.className = 'banner';
                const value = document.querySelector('input[name="priority"]:checked').value;
                if (value === 'low') {
                    banner.classList.add('priority-low');
                } else if (value === 'medium') {
                    banner.classList.add('priority-medium');
                } else if (value === 'high') {
                    banner.classList.add('priority-high');
                } else if (value === 'urgent') {
                    banner.classList.add('priority-urgent');
                }
                updateBannerTextColor();
            });
        });

        function updateBannerTextColor() {
            const bannerTitle = document.getElementById('banner-title');
            const langToggle = document.querySelector('.language-toggle');
            const selectedPriority = document.querySelector('input[name="priority"]:checked')?.value;
            const useLightText = selectedPriority === 'high' || selectedPriority === 'urgent';

            bannerTitle.classList.toggle('banner-text-color-light', useLightText);
            bannerTitle.classList.toggle('banner-text-color-dark', !useLightText);
            langToggle.style.color = useLightText ? '#ffffff' : '#1f2937';
        }

        // Material type changes - dynamic date ranges
        const materialCheckboxes = document.querySelectorAll('input[name="materials"]');
        const materialOtherCheckbox = document.getElementById('material-other');
        const dynamicDatesContainer = document.getElementById('dynamic-dates');

        materialCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateDynamicDates);
        });

        materialOtherCheckbox.addEventListener('change', () => {
            document.getElementById('material-other-input').classList.toggle('hidden');
        });

        function updateDynamicDates() {
            dynamicDatesContainer.innerHTML = '';
            const selectedMaterials = Array.from(document.querySelectorAll('input[name="materials"]:checked'))
                .map(el => el.value)
                .filter(val => val !== 'Other');

            selectedMaterials.forEach(material => {
                const div = document.createElement('div');
                div.className = 'dynamic-section';
                div.innerHTML = `
                    <label class="material-date-title" data-material="${material}">${getMaterialLabel(material)}</label>
                    <div class="date-range-row">
                        <div class="material-date-field">
                            <label for="date-${material}-start">
                                <span class="lang-fr">Début</span>
                                <span class="lang-en">Start</span>
                            </label>
                            <input type="date" id="date-${material}-start" class="material-date" data-material="${material}" data-type="start" required>
                        </div>
                        <div class="material-date-field">
                            <label for="date-${material}-end">
                                <span class="lang-fr">Fin</span>
                                <span class="lang-en">End</span>
                            </label>
                            <input type="date" id="date-${material}-end" class="material-date" data-material="${material}" data-type="end" required>
                        </div>
                    </div>
                    <div class="error-message" id="error-${material}"></div>
                `;
                dynamicDatesContainer.appendChild(div);
            });

            // Add event listeners for date validation
            document.querySelectorAll('.material-date').forEach(input => {
                input.addEventListener('change', validateMaterialDateRange);
            });
        }

        function getMaterialLabel(material) {
            const materialLabels = {
                'TV': { fr: 'TV', en: 'TV' },
                'Carousel': { fr: 'Carrousel', en: 'Carousel' },
                'Screensaver': { fr: 'Économiseur d\'écran', en: 'Screensaver' },
                'Email': { fr: 'Courriel', en: 'Email' },
                'Flash Ads': { fr: 'Publicités Flash', en: 'Flash Ads' },
                'Intranet': { fr: 'Éléments intranet', en: 'Intranet elements' },
                'Photo': { fr: 'Traitement photos', en: 'Photo editing' },
                'Modification': { fr: 'Modification d\'un élément existant', en: 'Modification of existing element' }
            };

            return materialLabels[material]?.[currentLanguage] || material;
        }

        function updateDynamicMaterialLabels() {
            document.querySelectorAll('.material-date-title').forEach(label => {
                const material = label.dataset.material;
                label.textContent = getMaterialLabel(material);
            });
        }

        function validateMaterialDateRange(e) {
            const material = e.target.dataset.material;
            const startInput = document.querySelector(`#date-${material}-start`);
            const endInput = document.querySelector(`#date-${material}-end`);
            const errorDiv = document.querySelector(`#error-${material}`);

            if (startInput.value && endInput.value) {
                const startDate = new Date(startInput.value);
                const endDate = new Date(endInput.value);
                if (startDate > endDate) {
                    errorDiv.textContent = currentLanguage === 'fr' ?
                        'La date de début doit être avant la date de fin' :
                        'Start date must be before end date';
                    endInput.classList.add('error');
                } else {
                    errorDiv.textContent = '';
                    endInput.classList.remove('error');
                }
            }
        }

        // Character counters
        const titleFrInput = document.getElementById('text-content-title-fr');
        const titleEnInput = document.getElementById('text-content-title-en');
        const textFrInput = document.getElementById('text-content-text-fr');
        const textEnInput = document.getElementById('text-content-text-en');

        titleFrInput.addEventListener('input', () => updateCharCounter('fr', 'title'));
        titleEnInput.addEventListener('input', () => updateCharCounter('en', 'title'));
        textFrInput.addEventListener('input', () => updateCharCounter('fr', 'text'));
        textEnInput.addEventListener('input', () => updateCharCounter('en', 'text'));

        function updateCharCounter(lang, type) {
            const input = type === 'title' ?
                (lang === 'fr' ? titleFrInput : titleEnInput) :
                (lang === 'fr' ? textFrInput : textEnInput);
            const countDiv = document.getElementById(`char-count-${type}-${lang}`);
            const maxChars = type === 'title' ? 100 : 150;
            const currentLength = input.value.length;

            countDiv.textContent = `${currentLength}/${maxChars}`;
            countDiv.classList.toggle('warning', currentLength > maxChars);
            input.classList.toggle('error', currentLength > maxChars);

            // Show/hide title-only confirm button
            if (type === 'text') {
                const confirmDiv = document.getElementById(`title-only-confirm-${lang}`);
                confirmDiv.classList.toggle('hidden', textFrInput.value.length > 0 || textEnInput.value.length > 0);
            }
        }

        // Title-only confirmation buttons
        document.querySelectorAll('.title-only-confirm-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const lang = btn.dataset.lang;
                titleOnlyConfirmed[lang] = true;
                btn.parentElement.classList.add('hidden');
            });
        });

        // Requester info auto-fill
        const requesterNameInput = document.getElementById('requester-name');
        const requesterEmailInput = document.getElementById('requester-email');
        const approverRequesterName = document.getElementById('approver-requester-name');
        const approverRequesterEmail = document.getElementById('approver-requester-email');

        requesterNameInput.addEventListener('change', () => {
            approverRequesterName.value = requesterNameInput.value;
        });

        requesterEmailInput.addEventListener('change', () => {
            approverRequesterEmail.value = requesterEmailInput.value;
        });

        // Add approver functionality
        let approverCount = 0;
        document.getElementById('add-approver-btn').addEventListener('click', (e) => {
            e.preventDefault();
            approverCount++;
            const container = document.getElementById('additional-approvers');
            const approverDiv = document.createElement('div');
            approverDiv.className = 'approver-item';
            approverDiv.id = `approver-${approverCount}`;
            approverDiv.innerHTML = `
                <button type="button" class="remove-approver" onclick="document.getElementById('approver-${approverCount}').remove()">×</button>
                <div class="approver-fields">
                    <div>
                        <label style="font-size: 12px; font-weight: 500; margin-bottom: 4px; display: block;">
                            <span class="lang-fr">Nom</span>
                            <span class="lang-en">Name</span>
                        </label>
                        <input type="text" class="approver-name" placeholder="">
                    </div>
                    <div>
                        <label style="font-size: 12px; font-weight: 500; margin-bottom: 4px; display: block;">
                            <span class="lang-fr">Courriel</span>
                            <span class="lang-en">Email</span>
                        </label>
                        <input type="email" class="approver-email" placeholder="">
                    </div>
                </div>
            `;
            container.appendChild(approverDiv);
        });

        // Form submission
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            if (validateForm()) {
                generateAndSendEmail();
            }
        });

        function validateForm() {
            let isValid = true;
            const errors = {};

            // Clear all previous errors
            document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
            document.querySelectorAll('input, textarea').forEach(el => el.classList.remove('error'));

            // Required fields
            const requiredFields = [
                'request-title',
                'requester-name',
                'requester-email',
                'delivery-date',
                'text-content-title-fr',
                'text-content-title-en'
            ];

            requiredFields.forEach(field => {
                const input = document.getElementById(field);
                if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('error');
                    const errorDiv = document.getElementById(`${field}-error`);
                    if (errorDiv) {
                        errorDiv.textContent = currentLanguage === 'fr' ? 'Ce champ est obligatoire' : 'This field is required';
                    }
                }
            });

            // Email validation
            const emailInput = document.getElementById('requester-email');
            if (emailInput.value && !isValidEmail(emailInput.value)) {
                isValid = false;
                emailInput.classList.add('error');
                document.getElementById('requester-email-error').textContent =
                    currentLanguage === 'fr' ? 'Format de courriel invalide' : 'Invalid email format';
            }

            // Priority validation
            if (!document.querySelector('input[name="priority"]:checked')) {
                isValid = false;
                document.getElementById('priority-error').textContent =
                    currentLanguage === 'fr' ? 'Veuillez sélectionner un niveau de priorité' : 'Please select a priority level';
            }

            // Character limit validation
            if (document.getElementById('text-content-title-fr').value.length > 100 ||
                document.getElementById('text-content-title-en').value.length > 100 ||
                document.getElementById('text-content-text-fr').value.length > 150 ||
                document.getElementById('text-content-text-en').value.length > 150) {
                isValid = false;
                const msg = currentLanguage === 'fr' ? 'Dépassement de la limite de caractères' : 'Character limit exceeded';
                if (document.getElementById('text-content-title-fr').value.length > 100) {
                    document.getElementById('text-content-title-fr-error').textContent = msg;
                }
                if (document.getElementById('text-content-title-en').value.length > 100) {
                    document.getElementById('text-content-title-en-error').textContent = msg;
                }
            }

            // Material date validation
            document.querySelectorAll('.material-date').forEach(input => {
                if (!input.value) {
                    isValid = false;
                    input.classList.add('error');
                }
            });

            // Validate text content - if text is empty, must have confirmation
            if (!textFrInput.value.trim() && !titleOnlyConfirmed.fr) {
                // Only valid if title is filled and user confirmed
                const titleOnlyConfirmFr = document.getElementById('title-only-confirm-fr');
                if (!titleOnlyConfirmFr.classList.contains('hidden')) {
                    isValid = false;
                }
            }
            if (!textEnInput.value.trim() && !titleOnlyConfirmed.en) {
                const titleOnlyConfirmEn = document.getElementById('title-only-confirm-en');
                if (!titleOnlyConfirmEn.classList.contains('hidden')) {
                    isValid = false;
                }
            }

            return isValid;
        }

        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function generateAndSendEmail() {
            const title = document.getElementById('request-title').value;
            const requesterName = document.getElementById('requester-name').value;
            const requesterEmail = document.getElementById('requester-email').value;
            const context = document.getElementById('context').value;
            const deliveryDate = document.getElementById('delivery-date').value;
            const priority = document.querySelector('input[name="priority"]:checked').value;
            const options = document.querySelector('input[name="options"]:checked').value;
            const guidelines = document.getElementById('visual-guidelines').value;

            // Get material dates
            let materialDates = {};
            document.querySelectorAll('.material-date').forEach(input => {
                const material = input.dataset.material;
                const type = input.dataset.type;
                if (!materialDates[material]) materialDates[material] = {};
                materialDates[material][type] = input.value;
            });

            // Get selected materials
            const selectedMaterials = Array.from(document.querySelectorAll('input[name="materials"]:checked'))
                .map(el => el.value === 'Other' ? document.getElementById('material-other-text').value : el.value)
                .filter(val => val);

            // Get approvers
            const ccEmails = [];
            document.querySelectorAll('#additional-approvers .approver-email').forEach(input => {
                if (input.value.trim()) {
                    ccEmails.push(input.value.trim());
                }
            });

            const formatValue = (value, emptyValue) => {
                const trimmedValue = typeof value === 'string' ? value.trim() : value;
                return trimmedValue ? `« ${trimmedValue} »` : emptyValue;
            };

            // Build email body based on current language
            let emailBody = '';
            if (currentLanguage === 'fr') {
                emailBody = `Demande de design graphique

Titre de la demande
Saisie utilisateur: ${formatValue(title, '(Non fourni)')}

Demandeur
Nom (saisie utilisateur): ${formatValue(requesterName, '(Non fourni)')}
Courriel (saisie utilisateur): ${formatValue(requesterEmail, '(Non fourni)')}

Contexte & objectif
Saisie utilisateur: ${formatValue(context, '(Non fourni)')}

Type de matériel
Sélection utilisateur: ${formatValue(selectedMaterials.join(', '), '(Aucun sélectionné)')}

Dates
Date de livrable (saisie utilisateur): ${formatValue(formatDate(deliveryDate), '(Non fourni)')}
${Object.entries(materialDates).map(([material, dates]) =>
    `${toVisualBold(material)}: ${formatDate(dates.start)} à ${formatDate(dates.end)}`
).join('\n') || ''}

Niveau de priorité
Sélection utilisateur: ${formatValue(getPriorityLabel(priority, 'fr'), '(Non fourni)')}

Contenu textuel
Français:
Titre (saisie utilisateur): ${formatValue(document.getElementById('text-content-title-fr').value, '(Non fourni)')}
Texte (saisie utilisateur): ${formatValue(document.getElementById('text-content-text-fr').value, '(Titre uniquement)')}

English:
Title (user entry): ${formatValue(document.getElementById('text-content-title-en').value, '(Not provided)')}
Text (user entry): ${formatValue(document.getElementById('text-content-text-en').value, '(Title only)')}

Directives visuelles & références
Saisie utilisateur: ${formatValue(guidelines, '(Non fourni)')}

Options / variations
Sélection utilisateur: ${formatValue(options === 'single' ? 'Un seul visuel' : 'Proposer plusieurs options', '(Non fourni)')}
`;
            } else {
                emailBody = `Graphic Design Request

Request Title
User entry: ${formatValue(title, '(Not provided)')}

Requester
Name (user entry): ${formatValue(requesterName, '(Not provided)')}
Email (user entry): ${formatValue(requesterEmail, '(Not provided)')}

Context & Objective
User entry: ${formatValue(context, '(Not provided)')}

Material Type
User selection: ${formatValue(selectedMaterials.join(', '), '(None selected)')}

Dates
Delivery date (user entry): ${formatValue(formatDate(deliveryDate), '(Not provided)')}
${Object.entries(materialDates).map(([material, dates]) =>
    `${toVisualBold(material)}: ${formatDate(dates.start)} to ${formatDate(dates.end)}`
).join('\n') || ''}

Priority Level
User selection: ${formatValue(getPriorityLabel(priority, 'en'), '(Not provided)')}

Text Content
French:
Title (user entry): ${formatValue(document.getElementById('text-content-title-fr').value, '(Not provided)')}
Text (user entry): ${formatValue(document.getElementById('text-content-text-fr').value, '(Title only)')}

English:
Title (user entry): ${formatValue(document.getElementById('text-content-title-en').value, '(Not provided)')}
Text (user entry): ${formatValue(document.getElementById('text-content-text-en').value, '(Title only)')}

Visual Guidelines & References
User entry: ${formatValue(guidelines, '(Not provided)')}

Options / Variations
User selection: ${formatValue(options === 'single' ? 'Single visual' : 'Propose multiple options', '(Not provided)')}
`;
            }

            // Build mailto link
            const subject = currentLanguage === 'fr' ?
                `Demande de design graphique — ${title}` :
                `Graphic Design Request — ${title}`;

            let mailtoLink = `mailto:alexandre.rochon@cfp-psc.gc.ca?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;

            if (ccEmails.length > 0) {
                mailtoLink += `&cc=${encodeURIComponent(ccEmails.join(';'))}`;
            }

            window.location.href = mailtoLink;
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString + 'T00:00:00');
            return currentLanguage === 'fr' ?
                date.toLocaleDateString('fr-CA', { year: 'numeric', month: 'long', day: 'numeric' }) :
                date.toLocaleDateString('en-CA', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        function getPriorityLabel(value, lang) {
            const labels = {
                'low': { fr: 'Faible', en: 'Low' },
                'medium': { fr: 'Moyenne', en: 'Medium' },
                'high': { fr: 'Élevée', en: 'High' },
                'urgent': { fr: 'Très urgent', en: 'Very urgent' }
            };
            return labels[value][lang];
        }

        // Scroll effect for banner color change
        window.addEventListener('scroll', () => {
            const scrolled = window.scrollY;
            const banner = document.getElementById('banner');

            // Change banner background based on scroll position
            if (scrolled > 0) {
                // Lighten the banner slightly when scrolling
                banner.style.opacity = '0.95';
            } else {
                banner.style.opacity = '1';
            }
        });

        // Initialize
        updateBannerTextColor();
    </script>
</body>
</html>
